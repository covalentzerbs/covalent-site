<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covalent Studios</title>
    <meta property="og:title" content="covalent studios">
    <meta property="og:description" content="a modern production company.">
    <meta property="og:image" content="https://covalentstudios.co/assets/images/og-image.png">
    <meta property="og:url" content="https://covalentstudios.co">
    <meta property="og:type" content="website">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables */
        :root {
            --ice: #FAFBFC;
            --bond-blue: #5979e9;
            --black: #0A0A0A;
            --gray: #6B7280;
            --white: #FFFFFF;
        }

        /* Reset */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none !important;
        }

        ::selection {
            background: var(--black);
            color: var(--white);
            -webkit-text-fill-color: var(--white);
        }

        html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
        }

        /* Body is the scroll container */
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            overflow-y: scroll;
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--black);
            color: var(--white);
            letter-spacing: -0.07em;
            /* Hide scrollbar */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        body::-webkit-scrollbar {
            display: none; /* Chrome, Safari */
        }

        /* Custom Cursor */
        .cursor {
            position: fixed;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--white);
            pointer-events: none;
            z-index: 10001;
            mix-blend-mode: difference;
            transform: translate(-50%, -50%);
        }

        /* Navigation - Plus Menu */
        .nav {
            position: fixed;
            top: 0;
            right: 0;
            padding: 2rem;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }

        .nav.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .menu-toggle {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .menu-toggle.active {
            transform: rotate(45deg);
        }

        .plus-icon {
            width: 22px;
            height: 22px;
            position: relative;
        }

        .plus-icon span {
            display: block;
            position: absolute;
            width: 100%;
            height: 2px;
            background: var(--white);
            top: 50%;
            left: 0;
            transition: all 0.3s ease;
        }

        .plus-icon span:first-child {
            transform: translateY(-50%) rotate(90deg);
        }

        .plus-icon span:last-child {
            transform: translateY(-50%);
        }

        /* Expanded Menu */
        .menu-overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            z-index: 999;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-end;
            padding: 7rem 3rem 3rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .menu-overlay.active {
            pointer-events: auto;
            opacity: 1;
        }

        .menu-links {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .menu-link {
            font-size: clamp(1rem, 1.8vw, 1.5rem);
            font-weight: 500;
            color: var(--white);
            text-decoration: none;
            opacity: 0;
            transform: translateX(30px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: -0.07em;
            line-height: 1.1;
        }

        .menu-overlay.active .menu-link {
            opacity: 0.6;
            transform: translateX(0);
        }

        .menu-overlay.active .menu-link:nth-child(1) { transition-delay: 0.05s; }
        .menu-overlay.active .menu-link:nth-child(2) { transition-delay: 0.1s; }

        .menu-link:hover {
            opacity: 1 !important;
        }

        .menu-link {
            position: relative;
            display: inline-block;
        }

        .menu-link-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #5979e9, #7B93FF, #5979e9, #3A5BD4);
            background-size: 300% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease infinite;
            pointer-events: none;
            -webkit-mask-image: radial-gradient(circle at var(--mx) var(--my), black var(--spread), transparent var(--spread));
            mask-image: radial-gradient(circle at var(--mx) var(--my), black var(--spread), transparent var(--spread));
        }

        .menu-link.current {
            opacity: 1 !important;
        }

        /* Logo Bottom Right */
        .logo-bottom {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }

        .logo-bottom.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .logo-bottom svg {
            width: 40px;
            height: 40px;
        }

        /* Scroll Progress Indicator */
        .scroll-progress {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .scroll-progress-segment {
            width: 3px;
            height: 24px;
            background: var(--white);
            opacity: 0.2;
            transition: opacity 0.3s ease;
            border-radius: 2px;
        }

        .scroll-progress-segment.active {
            opacity: 1;
        }


        /* ==================== */
        /* FIXED BACKGROUND VIDEO (persists through hero + reveal) */
        /* ==================== */
        .fixed-video-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
            background: var(--black);
            transition: opacity 0.6s ease;
        }

        .fixed-video-bg iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: scale(1.33);
            transform-origin: center center;
            border: none;
            pointer-events: none;
        }

        /* ==================== */
        /* HERO SECTION (transparent spacer over fixed video) */
        /* ==================== */
        .hero-section {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            /* snap handled by JS */
        }

        /* Large centered logomark */
        .hero-logo {
            position: relative;
            z-index: 10;
            width: clamp(50px, 7.5vw, 100px);
            height: clamp(50px, 7.5vw, 100px);
            opacity: 1;
            transition: opacity 0.6s ease;
        }

        .hero-logo svg {
            width: 100%;
            height: 100%;
        }


        /* ==================== */
        /* ABOUT SECTION */
        /* ==================== */
        .about-section {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            background: transparent;
            /* snap handled by JS */
        }

        .about-text {
            font-size: clamp(1.5rem, 5vw, 5rem);
            font-weight: 700;
            text-transform: lowercase;
            letter-spacing: -0.07em;
            line-height: 1.2;
            color: var(--white);
            text-align: center;
            margin: 0;
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .about-text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ==================== */
        /* PROJECTS SECTION */
        /* ==================== */
        .project-section {
            position: relative;
            height: 100vh;
            width: 100%;
            /* snap handled by JS */
            z-index: 2;
            background: var(--black);
            overflow: hidden;
        }

        .project-video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .project-video-container iframe {
            position: absolute;
            top: 50%;
            left: 50%;
            /* Always cover the full viewport — no black bars */
            min-width: 100%;
            min-height: 100%;
            width: 177.78vh; /* 16:9 wider than tall */
            height: 56.25vw; /* 16:9 taller than wide */
            transform: translate(-50%, -50%) scale(1.3);
            border: none;
            pointer-events: none;
        }

        /* Text overlay — bottom left, over the video */
        .project-info {
            position: absolute;
            bottom: 5rem;
            left: 5rem;
            z-index: 10;
        }

        .project-client-link {
            text-decoration: none;
            color: inherit;
        }

        .project-client {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(3.5rem, 7vw, 7rem);
            font-weight: 700;
            color: var(--white);
            line-height: 1;
            letter-spacing: -0.07em;
            text-transform: lowercase;
            margin: 0;
            /* Start hidden for animation */
            opacity: 0;
            transform: translateY(30px);
            /* Gradient hover */
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                        transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: inline-block;
        }

        .project-client::before {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            right: -0.15em;
            bottom: -0.15em;
            background: linear-gradient(90deg, #5979e9, #7B93FF, #5979e9, #3A5BD4);
            background-size: 300% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
            pointer-events: none;
            -webkit-mask-image: radial-gradient(circle at var(--mx, 0px) var(--my, 0px), black var(--spread, 0%), transparent var(--spread, 0%));
            mask-image: radial-gradient(circle at var(--mx, 0px) var(--my, 0px), black var(--spread, 0%), transparent var(--spread, 0%));
        }

        .project-subtitle {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(1rem, 2vw, 1.5rem);
            font-weight: 300;
            color: var(--white);
            opacity: 0;
            line-height: 1.3;
            letter-spacing: -0.07em;
            text-transform: lowercase;
            margin: 0.05em 0 0 0;
            transform: translateY(20px);
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.1s,
                        transform 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.1s;
        }

        /* When section is in view, animate text in */
        .project-section.in-view .project-client {
            opacity: 1;
            transform: translateY(0);
        }

        .project-section.in-view .project-subtitle {
            opacity: 0.7;
            transform: translateY(0);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .nav {
                padding: 1.5rem;
            }

            .logo-bottom {
                top: 1.5rem;
                left: 1.5rem;
            }

            .scroll-progress {
                right: 1.5rem;
            }

            .menu-overlay {
                padding: 6rem 2.5rem 2.5rem;
            }

            .project-info {
                bottom: 4rem;
                left: 4rem;
            }
        }

        @media (max-width: 768px) {
            .nav {
                padding: 1.5rem 1.5rem;
            }

            .logo-bottom {
                top: 1.5rem;
                left: 1.5rem;
            }

            .logo-bottom svg {
                width: 32px;
                height: 32px;
            }

            .scroll-progress {
                right: 1.5rem;
            }

            .menu-overlay {
                padding: 5rem 1.5rem 1.5rem;
            }

            .project-info {
                bottom: 2rem;
                left: 2rem;
            }
        }

        /* ==================== */
        /* DARK MODE OVERRIDES */
        /* ==================== */
        body.dark-mode {
            background-color: #0A0A0A !important;
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode ::selection {
            background: #FF4500 !important;
            color: #0A0A0A !important;
            -webkit-text-fill-color: #0A0A0A !important;
        }

        body.dark-mode .cursor {
            background: #FF4500 !important;
        }

        body.dark-mode .plus-icon span {
            background: #FF4500 !important;
        }

        body.dark-mode .menu-link {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .logo-bottom svg path {
            fill: #FF4500 !important;
        }

        body.dark-mode .footer {
            background: #0A0A0A !important;
        }

        body.dark-mode .footer-left,
        body.dark-mode .footer-link,
        body.dark-mode .footer-link .char {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .footer-link::after {
            background: #FF4500 !important;
        }

        body.dark-mode .social-link svg {
            fill: #FF4500 !important;
        }

        body.dark-mode .contact-email {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .clock-row {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .about-text {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .project-client {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .project-subtitle {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .scroll-progress-segment {
            background: #FF4500 !important;
        }

        body.dark-mode .director-name {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .director-credit {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .case-study-link {
            color: #FF4500 !important;
            -webkit-text-fill-color: #FF4500;
        }

        body.dark-mode .case-study-link::after {
            background: #FF4500 !important;
        }

        body.dark-mode .hero-logo svg path {
            fill: #FF4500 !important;
        }

        /* ==================== */
        /* DARK MODE TOGGLE */
        /* ==================== */
        .dark-mode-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 10000;
            cursor: none;
        }

        .dark-mode-toggle input {
            display: none;
        }

        .toggle-track {
            width: 36px;
            height: 18px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 9px;
            position: relative;
            transition: background 0.3s ease;
            cursor: none;
            display: block;
        }

        .toggle-track::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 14px;
            height: 14px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dark-mode-toggle input:checked + .toggle-track {
            background: rgba(255, 69, 0, 0.8);
        }

        .dark-mode-toggle input:checked + .toggle-track::after {
            transform: translateX(18px);
            background: #FF4500;
        }

    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor" id="cursor"></div>

    <!-- Navigation - Plus Menu -->
    <nav class="nav">
        <div class="menu-toggle" id="menuToggle">
            <div class="plus-icon">
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay">
        <div class="menu-links">
            <a href="directors.html" class="menu-link">directors</a>
            <a href="contact.html" class="menu-link">contact</a>
        </div>
    </div>

    <!-- Logo Bottom Right (scrolls to reveal/home section) -->
    <a href="#aboutSection" class="logo-bottom" id="logoBottom">
        <svg viewBox="0 0 160 160" fill="none">
            <path fill="#ffffff" d="M48.29,31.85l22.39,22.31c3.68-3.73,8.72-6.28,13.93-7.03,16.55-2.35,30.61,11.71,28.26,28.26-.74,5.21-3.3,10.26-7.03,13.93l22.28,22.28c.05.06.03.1,0,.16-.06.12-.72.73-.88.88-8.37,8.12-19.88,13.58-31.45,15.11-35.8,4.72-66.71-24.61-63.87-60.59,1.05-13.25,6.98-25.99,16.37-35.32ZM70.61,54.25c-8.62,8.49-9.63,22.25-2.56,32.07,8.54,11.86,26.04,13.97,36.87,3.93.14-.13.75-.7.8-.8.05-.09.04-.13-.04-.2l-35.07-34.99Z"/>
        </svg>
    </a>

    <!-- Scroll Progress Indicator (8 sections) -->
    <div class="scroll-progress" id="scrollProgress">
        <div class="scroll-progress-segment active" data-slide="0"></div>
        <div class="scroll-progress-segment" data-slide="1"></div>
        <div class="scroll-progress-segment" data-slide="2"></div>
        <div class="scroll-progress-segment" data-slide="3"></div>
        <div class="scroll-progress-segment" data-slide="4"></div>
        <div class="scroll-progress-segment" data-slide="5"></div>
        <div class="scroll-progress-segment" data-slide="6"></div>
        <div class="scroll-progress-segment" data-slide="7"></div>
    </div>

    <!-- Fixed background video (persists through hero + reveal) -->
    <div class="fixed-video-bg" id="fixedVideoBg">
        <iframe src="https://player.vimeo.com/video/1140543709?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
    </div>

    <!-- ==================== -->
    <!-- SECTION 1: HERO -->
    <!-- ==================== -->
    <section class="hero-section" id="heroSection">
        <div class="hero-logo">
            <svg viewBox="0 0 160 160" fill="none">
                <path fill="#ffffff" d="M48.29,31.85l22.39,22.31c3.68-3.73,8.72-6.28,13.93-7.03,16.55-2.35,30.61,11.71,28.26,28.26-.74,5.21-3.3,10.26-7.03,13.93l22.28,22.28c.05.06.03.1,0,.16-.06.12-.72.73-.88.88-8.37,8.12-19.88,13.58-31.45,15.11-35.8,4.72-66.71-24.61-63.87-60.59,1.05-13.25,6.98-25.99,16.37-35.32ZM70.61,54.25c-8.62,8.49-9.63,22.25-2.56,32.07,8.54,11.86,26.04,13.97,36.87,3.93.14-.13.75-.7.8-.8.05-.09.04-.13-.04-.2l-35.07-34.99Z"/>
            </svg>
        </div>
    </section>

    <!-- ==================== -->
    <!-- SECTION 2: ABOUT -->
    <!-- ==================== -->
    <section class="about-section" id="aboutSection">
        <h1 class="about-text" id="aboutText">classically trained.<br>relentlessly efficient.</h1>
    </section>

    <!-- ==================== -->
    <!-- SECTIONS 3-8: PROJECTS -->
    <!-- ==================== -->
    <section class="project-section" id="project1">
        <div class="project-video-container">
            <iframe src="https://player.vimeo.com/video/1161268499?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="project-info">
            <a href="wabi.html" class="project-client-link"><h2 class="project-client">wabi</h2></a>
            <p class="project-subtitle">when did we stop playing</p>
        </div>
    </section>

    <section class="project-section" id="project2">
        <div class="project-video-container">
            <iframe src="https://player.vimeo.com/video/1140543709?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="project-info">
            <a href="pinch.html" class="project-client-link"><h2 class="project-client">pinch</h2></a>
            <p class="project-subtitle">a holiday campaign</p>
        </div>
    </section>

    <section class="project-section" id="project3">
        <div class="project-video-container">
            <iframe src="https://player.vimeo.com/video/1142291147?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="project-info">
            <a href="fare.html" class="project-client-link"><h2 class="project-client">fare</h2></a>
            <p class="project-subtitle">beyond the bowl</p>
        </div>
    </section>

    <section class="project-section" id="project4">
        <div class="project-video-container">
            <iframe src="https://player.vimeo.com/video/1141586908?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="project-info">
            <a href="arcteryx.html" class="project-client-link"><h2 class="project-client">arcteryx</h2></a>
            <p class="project-subtitle">a city to summit</p>
        </div>
    </section>

    <section class="project-section" id="project5">
        <div class="project-video-container">
            <iframe src="https://player.vimeo.com/video/1149097153?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="project-info">
            <a href="hyatt.html" class="project-client-link"><h2 class="project-client">world of hyatt</h2></a>
            <p class="project-subtitle">jess pegula x us open</p>
        </div>
    </section>

    <section class="project-section" id="project6">
        <div class="project-video-container">
            <iframe src="https://player.vimeo.com/video/1141278566?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&loop=1&muted=1&controls=0&background=1" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="project-info">
            <a href="ever.html" class="project-client-link"><h2 class="project-client">ever</h2></a>
            <p class="project-subtitle">a mini doc</p>
        </div>
    </section>

    <!-- Motion library (vanilla JS) -->
    <script src="https://cdn.jsdelivr.net/npm/motion@12.34.0/dist/motion.js"></script>

    <script>
        // ==================== //
        // LOGO HOME BUTTON
        // ==================== //
        document.getElementById('logoBottom').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('aboutSection').scrollIntoView({ behavior: 'smooth' });
        });

        // ==================== //
        // MENU
        // ==================== //
        const menuToggle = document.getElementById('menuToggle');
        const menuOverlay = document.getElementById('menuOverlay');

        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            menuOverlay.classList.toggle('active');
        });

        menuOverlay.addEventListener('click', (e) => {
            if (e.target === menuOverlay) {
                menuToggle.classList.remove('active');
                menuOverlay.classList.remove('active');
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && menuOverlay.classList.contains('active')) {
                menuToggle.classList.remove('active');
                menuOverlay.classList.remove('active');
            }
        });

        // ==================== //
        // MENU LINK GRADIENT SPREAD EFFECT
        // ==================== //
        document.querySelectorAll('.menu-link').forEach(link => {
            // Create gradient overlay span (duplicate text for masking)
            const gradient = document.createElement('span');
            gradient.classList.add('menu-link-gradient');
            gradient.textContent = link.textContent;
            gradient.style.setProperty('--spread', '0%');
            link.appendChild(gradient);

            let animationFrame;

            link.addEventListener('mouseenter', (e) => {
                const rect = link.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                gradient.style.setProperty('--mx', x + 'px');
                gradient.style.setProperty('--my', y + 'px');
                gradient.style.setProperty('--spread', '0%');

                // Animate spread from 0% to 200% slowly
                let start = null;
                const duration = 900; // ms — slow premium feel
                const animate = (timestamp) => {
                    if (!start) start = timestamp;
                    const progress = Math.min((timestamp - start) / duration, 1);
                    // Ease out cubic for smooth deceleration
                    const eased = 1 - Math.pow(1 - progress, 3);
                    gradient.style.setProperty('--spread', (eased * 200) + '%');
                    if (progress < 1) {
                        animationFrame = requestAnimationFrame(animate);
                    }
                };
                cancelAnimationFrame(animationFrame);
                animationFrame = requestAnimationFrame(animate);
            });

            link.addEventListener('mouseleave', () => {
                cancelAnimationFrame(animationFrame);
                // Fade out by shrinking spread back
                let start = null;
                const currentSpread = parseFloat(gradient.style.getPropertyValue('--spread')) || 200;
                const duration = 500;
                const animate = (timestamp) => {
                    if (!start) start = timestamp;
                    const progress = Math.min((timestamp - start) / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3);
                    gradient.style.setProperty('--spread', (currentSpread * (1 - eased)) + '%');
                    if (progress < 1) {
                        animationFrame = requestAnimationFrame(animate);
                    }
                };
                animationFrame = requestAnimationFrame(animate);
            });
        });

        // ==================== //
        // PROJECT TITLE GRADIENT SPREAD EFFECT
        // ==================== //
        // Track scrolling state to prevent false mouseenter triggers
        let isScrolling = false;
        let scrollTimeout;
        document.body.addEventListener('scroll', () => {
            isScrolling = true;
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => { isScrolling = false; }, 200);
        }, { passive: true });

        document.querySelectorAll('.project-client').forEach(title => {
            // Set data-text for the ::before pseudo-element
            title.setAttribute('data-text', title.textContent);

            let animationFrame;

            title.addEventListener('mouseenter', (e) => {
                if (isScrolling) return;

                const rect = title.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                title.style.setProperty('--mx', x + 'px');
                title.style.setProperty('--my', y + 'px');
                title.style.setProperty('--spread', '0%');

                let start = null;
                const duration = 1400;
                const animate = (timestamp) => {
                    if (!start) start = timestamp;
                    const progress = Math.min((timestamp - start) / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3);
                    title.style.setProperty('--spread', (eased * 200) + '%');
                    if (progress < 1) {
                        animationFrame = requestAnimationFrame(animate);
                    }
                };
                cancelAnimationFrame(animationFrame);
                animationFrame = requestAnimationFrame(animate);
            });

            title.addEventListener('mouseleave', () => {
                cancelAnimationFrame(animationFrame);
                const currentSpread = parseFloat(title.style.getPropertyValue('--spread')) || 200;

                let start = null;
                const duration = 700;
                const animate = (timestamp) => {
                    if (!start) start = timestamp;
                    const progress = Math.min((timestamp - start) / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3);
                    title.style.setProperty('--spread', (currentSpread * (1 - eased)) + '%');
                    if (progress < 1) {
                        animationFrame = requestAnimationFrame(animate);
                    }
                };
                animationFrame = requestAnimationFrame(animate);
            });
        });

        // ==================== //
        // CUSTOM CURSOR
        // ==================== //
        const cursor = document.getElementById('cursor');
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        function animateCursor() {
            cursorX += (mouseX - cursorX) * 0.15;
            cursorY += (mouseY - cursorY) * 0.15;
            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // ==================== //
        // WEIGHTED SCROLL-SNAP
        // ==================== //
        const sections = document.querySelectorAll('.hero-section, .about-section, .project-section');
        let currentIndex = 0;
        let isAnimating = false;
        let wheelDelta = 0;
        let wheelTimer = null;
        const THRESHOLD = 60; // accumulated delta needed to trigger snap

        function scrollToSection(index) {
            if (index < 0 || index >= sections.length || isAnimating) return;
            isAnimating = true;
            currentIndex = index;

            const target = sections[index];
            const start = window.scrollY || document.documentElement.scrollTop || document.body.scrollTop;
            const end = target.offsetTop;
            const distance = end - start;
            const duration = 1200;
            let startTime = null;

            function easeOutExpo(t) {
                return t === 1 ? 1 : 1 - Math.pow(2, -10 * t);
            }

            function step(timestamp) {
                if (!startTime) startTime = timestamp;
                const elapsed = timestamp - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = easeOutExpo(progress);

                document.documentElement.scrollTop = start + distance * eased;
                document.body.scrollTop = start + distance * eased;

                if (progress < 1) {
                    requestAnimationFrame(step);
                } else {
                    // Settle delay — adds the "weight" feel
                    setTimeout(() => {
                        isAnimating = false;
                        wheelDelta = 0;
                    }, 150);
                }
            }

            requestAnimationFrame(step);
        }

        // Determine starting section on load
        const startScroll = window.scrollY || document.documentElement.scrollTop;
        sections.forEach((s, i) => {
            if (Math.abs(s.offsetTop - startScroll) < window.innerHeight * 0.5) {
                currentIndex = i;
            }
        });

        window.addEventListener('wheel', (e) => {
            e.preventDefault();

            if (isAnimating) return;

            wheelDelta += e.deltaY;
            clearTimeout(wheelTimer);

            // Reset accumulated delta after inactivity
            wheelTimer = setTimeout(() => { wheelDelta = 0; }, 300);

            if (wheelDelta > THRESHOLD) {
                wheelDelta = 0;
                scrollToSection(currentIndex + 1);
            } else if (wheelDelta < -THRESHOLD) {
                wheelDelta = 0;
                scrollToSection(currentIndex - 1);
            }
        }, { passive: false });

        // Touch support
        let touchStartY = 0;
        window.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        window.addEventListener('touchend', (e) => {
            if (isAnimating) return;
            const diff = touchStartY - e.changedTouches[0].clientY;
            if (Math.abs(diff) > 50) {
                scrollToSection(currentIndex + (diff > 0 ? 1 : -1));
            }
        }, { passive: true });

        // Keyboard support
        window.addEventListener('keydown', (e) => {
            if (isAnimating) return;
            if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                e.preventDefault();
                scrollToSection(currentIndex + 1);
            } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                e.preventDefault();
                scrollToSection(currentIndex - 1);
            }
        });

        // Click on progress dots to navigate
        document.querySelectorAll('.scroll-progress-segment').forEach((dot, i) => {
            dot.addEventListener('click', () => scrollToSection(i));
        });

        // ==================== //
        // SECTION OBSERVER (8 sections)
        // ==================== //
        const heroLogo = document.querySelector('.hero-logo');
        const aboutText = document.getElementById('aboutText');
        const fixedVideoBg = document.getElementById('fixedVideoBg');
        const logoBottom = document.getElementById('logoBottom');
        const navEl = document.querySelector('.nav');
        const progressSegments = document.querySelectorAll('.scroll-progress-segment');

        // All 8 sections in order
        const allSectionIds = [
            'heroSection', 'aboutSection',
            'project1', 'project2', 'project3', 'project4', 'project5', 'project6'
        ];

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.id;

                // Toggle in-view class for project text animations
                if (id.startsWith('project')) {
                    entry.target.classList.toggle('in-view', entry.isIntersecting && entry.intersectionRatio >= 0.5);
                }

                if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                    const sectionIndex = allSectionIds.indexOf(id);

                    // Update progress dots
                    progressSegments.forEach((seg, i) => {
                        seg.classList.toggle('active', i === sectionIndex);
                    });

                    // Hero-specific
                    heroLogo.style.opacity = id === 'heroSection' ? '1' : '0';
                    logoBottom.classList.toggle('visible', id !== 'heroSection');
                    navEl.classList.toggle('visible', id !== 'heroSection');

                    // About text animation
                    aboutText.classList.toggle('visible', id === 'aboutSection');

                    // Keep fixed bg video visible through hero + about (parallax)
                    const showBgVideo = id === 'heroSection' || id === 'aboutSection';
                    fixedVideoBg.style.opacity = showBgVideo ? '1' : '0';
                }
            });
        }, { threshold: 0.5 });

        // Observe all 8 sections
        allSectionIds.forEach(id => {
            const el = document.getElementById(id);
            if (el) observer.observe(el);
        });

        // ==================== //
        // PROJECT ANIMATIONS (Motion)
        // ==================== //
        const { animate, inView } = Motion;

        document.querySelectorAll('.project-section').forEach((section) => {
            const client = section.querySelector('.project-client');
            const subtitle = section.querySelector('.project-subtitle');

            inView(section, () => {
                if (client) {
                    animate(client,
                        { opacity: [0, 1], y: [30, 0] },
                        { duration: 0.7, easing: [0.22, 1, 0.36, 1] }
                    );
                }
                if (subtitle) {
                    animate(subtitle,
                        { opacity: [0, 0.7], y: [20, 0] },
                        { duration: 0.7, delay: 0.12, easing: [0.22, 1, 0.36, 1] }
                    );
                }

                return () => {
                    if (client) animate(client, { opacity: 0, y: 30 }, { duration: 0.3 });
                    if (subtitle) animate(subtitle, { opacity: 0, y: 20 }, { duration: 0.3 });
                };
            }, { amount: 0.5 });
        });
    </script>

    <!-- Dark Mode Toggle -->
    <label class="dark-mode-toggle">
        <input type="checkbox" id="darkModeToggle">
        <span class="toggle-track"></span>
    </label>

    <script>
        // ==================== //
        // DARK MODE TOGGLE
        // ==================== //
        (function() {
            const toggle = document.getElementById('darkModeToggle');
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
                toggle.checked = true;
            }
            toggle.addEventListener('change', () => {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
            });

            // Cursor inflate on toggle hover
            const cursorEl = document.getElementById('cursor');
            const toggleLabel = document.querySelector('.dark-mode-toggle');
            toggleLabel.addEventListener('mouseenter', () => {
                cursorEl.style.transform = 'translate(-50%, -50%) scale(1.8)';
                cursorEl.style.transition = 'transform 0.2s ease, left 0s, top 0s';
            });
            toggleLabel.addEventListener('mouseleave', () => {
                cursorEl.style.transform = 'translate(-50%, -50%) scale(1)';
                cursorEl.style.transition = 'transform 0.2s ease, left 0s, top 0s';
            });
        })();
    </script>
</body>
</html>
